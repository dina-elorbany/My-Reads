{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eng.dina/Documents/Work and Learning/Web-development/udacity/react-cross-skilling/MyReads-Project/build-version/My-Reads/starter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eng.dina/Documents/Work and Learning/Web-development/udacity/react-cross-skilling/MyReads-Project/build-version/My-Reads/starter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eng.dina/Documents/Work and Learning/Web-development/udacity/react-cross-skilling/MyReads-Project/build-version/My-Reads/starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import Search from'./views/Search';import Home from'./views/Home';import{Route,Routes}from'react-router-dom';import{useState,useEffect}from'react';import*as BooksAPI from'./apis/BooksAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),booksList=_useState2[0],setBooksList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResult=_useState4[0],setSearchResult=_useState4[1];var shelvesArray=['Currently Reading','Want to Read','Read'];var shelvesOptions=['Move to...'].concat(shelvesArray,['None']);var convertToCamelCase=function convertToCamelCase(title){var titleSplitToArray=title.split(' ').map(function(word){return word[0].toUpperCase()+word.slice(1);});var titleCamelCase=titleSplitToArray.join('')[0].toLowerCase()+titleSplitToArray.join('').slice(1);return titleCamelCase;};var getBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var booksList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return BooksAPI.getAll();case 2:booksList=_context.sent;return _context.abrupt(\"return\",setBooksList(booksList));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getBooks(){return _ref.apply(this,arguments);};}();useEffect(function(){return getBooks();},[]);var updateShelf=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(book,shelf){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return BooksAPI.update(book,shelf);case 2:return _context2.abrupt(\"return\",getBooks());case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function updateShelf(_x,_x2){return _ref2.apply(this,arguments);};}();var getBooksFromSearch=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(query){var res,resWithShelf;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!(query!=='')){_context3.next=8;break;}_context3.next=4;return BooksAPI.search(query);case 4:res=_context3.sent;resWithShelf=res.map(function(bookSearch){booksList.forEach(function(book){return bookSearch.id===book.id&&(bookSearch.shelf=book.shelf);});return bookSearch;});setSearchResult(resWithShelf);return _context3.abrupt(\"return\",setSearchResult(resWithShelf));case 8:if(query==='')setSearchResult([]);_context3.next=15;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);console.error('err '+_context3.t0.error);setSearchResult([]);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function getBooksFromSearch(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Routes,{className:\"app\",children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(Home,{shelvesArray:shelvesArray,shelvesOptions:shelvesOptions,booksList:booksList,updateShelf:updateShelf,convertToCamelCase:convertToCamelCase})}),/*#__PURE__*/_jsx(Route,{path:\"/search\",element:/*#__PURE__*/_jsx(Search,{getBooksFromSearch:getBooksFromSearch,searchResult:searchResult,updateShelf:updateShelf})})]});}export default App;","map":{"version":3,"names":["Search","Home","Route","Routes","useState","useEffect","BooksAPI","App","booksList","setBooksList","searchResult","setSearchResult","shelvesArray","shelvesOptions","convertToCamelCase","title","titleSplitToArray","split","map","word","toUpperCase","slice","titleCamelCase","join","toLowerCase","getBooks","getAll","updateShelf","book","shelf","update","getBooksFromSearch","query","search","res","resWithShelf","bookSearch","forEach","id","console","error"],"sources":["/Users/eng.dina/Documents/Work and Learning/Web-development/udacity/react-cross-skilling/MyReads-Project/build-version/My-Reads/starter/src/App.js"],"sourcesContent":["import './App.css';\nimport Search from './views/Search';\nimport Home from './views/Home';\nimport { Route, Routes } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\n\nimport * as BooksAPI from './apis/BooksAPI';\n\nfunction App() {\n  const [booksList, setBooksList] = useState([]);\n  const [searchResult, setSearchResult] = useState([]);\n\n  const shelvesArray = ['Currently Reading', 'Want to Read', 'Read'];\n  const shelvesOptions = ['Move to...', ...shelvesArray, 'None'];\n\n  const convertToCamelCase = title => {\n    const titleSplitToArray = title\n      .split(' ')\n      .map(word => word[0].toUpperCase() + word.slice(1));\n    const titleCamelCase =\n      titleSplitToArray.join('')[0].toLowerCase() +\n      titleSplitToArray.join('').slice(1);\n    return titleCamelCase;\n  };\n\n  const getBooks = async () => {\n    const booksList = await BooksAPI.getAll();\n    return setBooksList(booksList);\n  };\n\n  useEffect(() => getBooks(), []);\n\n  const updateShelf = async (book, shelf) => {\n    await BooksAPI.update(book, shelf);\n    return getBooks();\n  };\n\n  const getBooksFromSearch = async query => {\n    try {\n      if (query !== '') {\n        const res = await BooksAPI.search(query);\n\n        const resWithShelf = res.map(bookSearch => {\n          booksList.forEach(\n            book => bookSearch.id === book.id && (bookSearch.shelf = book.shelf)\n          );\n          return bookSearch;\n        });\n        setSearchResult(resWithShelf);\n\n        return setSearchResult(resWithShelf);\n      }\n      if (query === '') setSearchResult([]);\n    } catch (error) {\n      console.error('err ' + error.error);\n      setSearchResult([]);\n    }\n  };\n\n  return (\n    <Routes className='app'>\n      <Route\n        exact\n        path='/'\n        element={\n          <Home\n            shelvesArray={shelvesArray}\n            shelvesOptions={shelvesOptions}\n            booksList={booksList}\n            updateShelf={updateShelf}\n            convertToCamelCase={convertToCamelCase}\n          />\n        }\n      />\n      <Route\n        path='/search'\n        element={\n          <Search\n            getBooksFromSearch={getBooksFromSearch}\n            searchResult={searchResult}\n            updateShelf={updateShelf}\n          />\n        }\n      />\n    </Routes>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}